//d:\contents\coffee1.jpg
//이 경로가 반대편에 있는 client가 접근할 수 있는 곳이 어디까지인지 파악해야한다.

package kr.or.ddit;
import javax.servlet.http.*;
import javax.servlet.*;
import java.io.*;

public class ImageServlet extends HttpServlet{

	protected void doGet(HttpServletRequest req,
                     HttpServletResponse resp)
              throws ServletException,
                     IOException{
					 
		String mime = "image/jpeg;charset=utf-8";
		resp.setContentType(mime);
					 
					 
		String folder = "d:/contents";
		String imageFilename = req.getParameter("image");
		File imageFile = new File(folder, imageFilename);
		FileInputStream fis = new FileInputStream(imageFile);
		OutputStream os = resp.getOutputStream();
		
		byte[] buffer = new byte[1024];	// 
		int pointer = -1;
		while((pointer = fis.read(buffer)) != -1){
			os.write(buffer, 0, pointer);		// 데이터를 쓸 때에는 항상 0번째부터 읽어야하며, pointer가 읽어온만큼까지만 써야한다.
			
		}
		
	
	}
	
}
