<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel = "stylesheet" href = "../css/public.css">
<script src="../js/jquery-3.5.1.min.js"></script>
<style>
	td{
		height: auto;
		padding: 10px;
		text-align: center;
	}
	#names{
		width: 200px;
	}
	#details{
		width: 400px;
	}
	
	p:hover{
		background: white;
	}
	
	td{
		text-align: left;
	}
</style>

<script>
	$(function(){
		$('input').on('click', function(){
			
			$.getJSON(
				'buyerNames.jsp',
				function(res){
					
					code = "";
					$.each(res, function(i, v){
						code += "<p id='" + v.id + "'>" + v.name + "</p>";
					})
					$('#names').html(code);
					
				}
			)
			
			
			
			/* $.ajax({
				url : 'buyerNames.jsp',
				type : 'get',
				success : function(res){
					
					code = "";
					$.each(res, function(i, v){
						code += "<p id='" + v.id + "'>" + v.name + "</p>";
					})
					$('#names').html(code);
					
				},
				error : function(xhr){
					alert("상태 : " + xhr.status);
				},
				dataType : 'json'
			}) */
		})
		
// 		$('#names').on('click', 'p', function(){
			
// 			idvalue = $(this).attr('id');
			
// 			$.ajax({
// 				url : 'buyerDetails.jsp',
// 				type : 'post',  /* 전송할 데이터가 있을 때 사용 */
// 				data : {"id" : idvalue},
// 				success : function(res){ /* success한 결과는 res로 받는다. */
// // 					code = "<div>BUYER_ID" + res.id + "</div>";

// 					// 선생님은 테이블을 생성하여 출력하는 방식을 사용함
// 					code = "<table class ='tab'>"
// 					code += "<tr><td>BUYER_ID</td><td>" + res.id + "</td>";
// 					code += "<tr><td>BUYER_NAME</td><td>" + res.name + "</td>";
// 					code += "<tr><td>BUYER_LGU</td><td>" + res.lgu + "</td>";
// 					code += "<tr><td>BUYER_COMTEL</td><td>" + res.comtel + "</td>";
// 					code += "<tr><td>BUYER_BANK</td><td>" + res.bank + "</td>";
// 					code += "<tr><td>BUYER_BANKNO</td><td>" + res.bankno + "</td>";
// 					code += "<tr><td>BUYER_BANKNAME</td><td>" + res.bankname + "</td>";
// 					code += "<tr><td>BUYER_MAIL</td><td>" + res.mail + "</td>";
// 					code += "<tr><td>BUYER_ZIP</td><td>" + res.zip + "</td>";
// 					code += "<tr><td>BUYER_ADD1</td><td>" + res.add1 + "</td>";
// 					code += "<tr><td>BUYER_ADD2</td><td>" + res.add2 + "</td>";
// 					code += "</table>";
					
					
// 				/* 	code =  "<p>BUYER_ID " + res.id + "</p>";
// 					code += "<p>BUYER_NAME " + res.name + "</p>";
// 					code += "<p>BUYER_LGU " + res.lgu + "</p>";
// 					code += "<p>BUYER_COMTEL " + res.comtel + "</p>";
// 					code += "<p>BUYER_BANK " + res.bank + "</p>";
// 					code += "<p>BUYER_BANKNO " + res.bankno + "</p>";
// 					code += "<p>BUYER_BANKNAME " + res.bankname + "</p>";
// 					code += "<p>BUYER_MAIL " + res.mail + "</p>";
// 					code += "<p>BUYER_ZIP " + res.zip + "</p>";
// 					code += "<p>BUYER_ADD1 " + res.add1 + "</p>";
// 					code += "<p>BUYER_ADD2 " + res.add2 + "</p>"; */
					
// 					$('#details').html(code);
// 				},
// 				error : function(xhr){ /*  */
// 					alert("상태 : " + xhr.status);
// 				},
// 				dataType : 'json'	// html, text
// 			})
			
// 		})

// ///////////////////////////////////////////////////////////////////////////

	$('#names').on('click', 'p', function(){
		idvalue = $(this).attr('id');
			
		$.post(
			'details.jsp',
			{"id" : idvalue},
			function(res){
					$('#details').html(res);
			},
			'html'	
		)
		
// 			$.ajax({
// 				url : 'details.jsp',
// 				type : 'post',  /* 전송할 데이터가 있을 때 사용 */
// 				data : {"id" : idvalue},
// 				success : function(res){
// 					$('#details').html(res);
// 				},
// 				error : function(xhr){
// 					alert("상태 : " + xhr.status);
// 				},
// 				dataType : 'html'	
// 				})
				
			})
	});
</script>
</head>
<body>

	<div class="box">
	
		<br />
		
		<input type="button" value = "확인"/>
		<div id="result1">
			<table border="1">
				<tr>
					<td>거래처이름</td>
					<td>거래처상세정보</td>
				</tr>
				<tr> 
					<td id="names">
						<!-- <p id='P10101'>삼성컴퓨터</p> -->
					</td>
					<td id="details"></td>
				</tr>
			</table>
		
		
		
		</div>
	</div>
</body>
</html>